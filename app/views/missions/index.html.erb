<!-- FORM DROPDOWN -->

<div class="card-filters">
  <div class="dropdown">
    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
      Filtres
    </button>
    <div class="dropdown-menu">
    <%= render 'shared/form_filters' %>
  </div>
</div>

<div>
  <% if params[:starting_date].present? || params[:ending_date].present? %>
    <p><%= params[:starting_date] %> --> <%= params[:ending_date] %></p>
  <% end %>
  <% if params[:duration].present? %>
    <p><%= params[:duration] %> h</p>
  <% end %>
</div>


<!-- MAP -->

<div
  id="map"
  style="width: 100%;
  height: 250px;"
  data-markers="<%= @markers.to_json %>"
  data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
</div>


<!-- SELECTION FILTRES -->


<div class="cards-container">
  <% if @missions.any? %>
  <div class="cards">
    <div class="row">
      <% @missions.each do |mission| %>
        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
          <%= link_to mission_path(mission) do %>
            <div class="card-mission">
              <div class="card-picture" style="background-image: url(<%= cl_image_path(mission.picture, height: 200, crop: :fill) %>);">
                <%= display_picto_cause(mission.cause) %>
                <div class="card-count-places">
                  <h2><%= mission.maxcapacity %></h2>
                  <h3>places restantes</h3>
                </div>
              </div>
              <div class="card-misson-infos">
                <div>
                  <h4><%= display_date(mission.datetime, mission.duration) %></h4>
                  <h2><%= mission.title.capitalize %></h2>
                  <p><%= mission.description.capitalize %></p>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>
  </div>
  <% else %>
    <p>Pas de missions ğŸ˜³</p>
  <% end %>
</div>



